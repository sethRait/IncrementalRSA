<!--
This code is for the purpose of demonstrating basic sql-injection attacks and is
not web-safe.
-->
<html>
<body>
<?php
$username = "root";
$password = "root";
$hostname = "localhost";

// Connect to the database
$dbhandle = mysqli_connect($hostname, $username, $password)
	or die("Unable to connect to MySQL");

// Select a database
$selected = mysqli_select_db($dbhandle, "test")
	or die("Unable to select test");

// Query user
$uname = $_POST["un"];
$pass = $_POST["pw"];

$query = "SELECT * FROM Users WHERE Users.Username='$uname' AND Users.Password='$pass'";
$result = mysqli_query($dbhandle, $query);

// User validation
if (mysqli_num_rows($result) == 1) {
	echo "Welcome, ".$uname."!<br>";
}
else {
	echo "User ".$uname." does not exist<br>";
}

while ($row = mysqli_fetch_array($result)) {
	echo "<br>Username: ".$row{'Username'}." Password: ".$row{'Password'}."<br>";
}

// Close the connection
mysqli_close($dbhandle);
?>
</body>
</html>
